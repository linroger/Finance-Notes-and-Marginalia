---
title: 'A Brief Introduction to Stochastic Calculus'
cssclasses: academia
tags:
  - stochastic_calculus
  - binomial_lattice_models
  - fixed_income_derivatives
  - no_arbitrage
  - short_rate
  - term_structure_modeling
  - interest_rate_derivatives
  - martingale_pricing
  - ho_lee_model
  - black_derman_toy_model
aliases:
  - Stochastic Calculus Introduction
  - Interest Rate Models
  - Fixed Income Derivatives Pricing
  - Binomial Lattice Models
  - Short Rate Models
key_concepts:
  - Arbitrage-free pricing
  - Binomial lattice models
  - Fixed income derivative securities
  - Short rate and lattice models
  - Term structure of interest rates
  - Martingale pricing methods
  - Elementary securities and state prices
  - Forward equations
  - Ho-Lee model
  - Black-Derman-Toy model
  - Calibration to observed term structure
---

# A Brief Introduction to Stochastic Calculus

These lecture notes introduce fixed income derivative securities and the modeling philosophy used to price these securities. We will use binomial lattice models for doing this and the securities we will consider include bond futures and forwards, caplets and caps, floorlets and floors, and swaps and swaptions.

<<<<<<< HEAD
Fixed-income models are inherently more complex than security models as we need to model the evolution of the entire term-structure of interest rates. The short-rate, $r_t$, is the variable of interest in many fixed income models and we will focus on this in our lattice models. Our pricing "philosophy" will be to simply specify risk-neutral probabilities for the short-rate, $r_t$, and to do so without any reference to the true dynamics of the short-rate.

This is in contrast to the way we developed risk-neutral pricing in the binomial model for stocks. In the lattice models of these notes, however, we will price securities in such a way that guarantees no-arbitrage.

We also note that since the financial crisis of 2008/2009 there have been substantial developments in term structure modeling. In particular (and in contrast to the pre-crisis world) it is now widely recognized that the pricing of LIBOR-based derivatives such as swaps, swaptions, caps, floors etc. require a so-called multi-curve framework with a separate curve necessary for each tenor. We do not develop the multi-curve framework in these notes as our goal is simply to learn the basics of term structure modeling and fixed income derivatives pricing.

## 1 Binomial-Lattice Models

We begin with binomial-lattice models of the short rate. These models may be viewed as models in their own right or as approximations to more sophisticated continuous-time one-factor short-rate models. These models will also be used to introduce various interest rate derivatives that are commonly traded in the financial markets.

## 1.1 Constructing An Arbitrage-Free Lattice

Consider the binomial lattice below where we specify the short rate, $r_{i,j}$, that will apply for the single period beginning at node $N(i,j)$. This means for example that if $1 is deposited in the cash account at $t = i$, state $j$ (i.e. node $N(i,j)$), then this deposit will be worth $(1 + r_{i,j})$ at time $t + 1$ regardless of the successor node to $N(i,j)$.
=======
These lecture notes introduce [fixed income derivative securities](.md) and the modeling philosophy used to price these securities. We will use [binomial lattice models](.md) for doing this and the securities we will consider include bond [futures and forwards](Derivatives/Part%20I%20-%20Forwards%20and%20Futures/Chapter%201%20-%20Derivative%20Securities.md),  caplets and caps,  floorlets and [floors](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2016/Caps%20and%20Floors.md),  and swaps and swaptions.

Fixed-income models are inherently more complex than security models as we need to model the evolution of the entire term-structure of [interest rates](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%202/Interest%20Rate%20Quotations.md). The short-rate,  rt,  is the variable of interest in many [fixed income](../Fixed%20Income%20Asset%20Pricing/Lecture%20Notes%20Bonds,%20%20Preferred%20Stock,%20%20and%20Structured%20Products.md) models and we will focus on this in our [lattice models](../Financial%20Instruments/Binomial%20Option%20Pricing%20Model.md). Our [pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) "philosophy" will be to simply specify [risk-neutral probabilities](../Financial%20Instruments/Financial%20Instruments.md) for the short-rate,  rt,  and to do so without any reference to the true dynamics of the short-rate.

This is in contrast to the way we developed [risk-neutral pricing](Financial%20Mathematics%20Course.md) in the [binomial model](../Financial%20Instruments/Lecture%20Notes-%20Financial%20Instruments/Teaching%20Note%204-Multiperiod%20Binomial%20Trees/Binomial%20Option%20Pricing.md) for stocks. In the [lattice models](../Financial%20Instruments/Binomial%20Option%20Pricing%20Model.md) of these notes,  however,  we will will price securities in such a way that guarantees no-[arbitrage](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md).

We also note that since the [financial crisis](../Financial%20Markets%20and%20Institutions/III.%20Liquidity%20of%20Assets/Class%209-%20Bailouts%20and%20Bank%20Failures/Squam%20Lake%20Group%20Letter.md) of 2008 / 2009 there have been substantial developments in [term structure modeling](../Course%20Notes/Python/QuantLib-Python/Hull%20White%20Term%20Structure%20Simulations%20with%20QuantLib%20Python.md). In particular (and in contrast to the pre-crisis world) it is now widely recognized that the [pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) of LIBOR-based [derivatives](../Financial%20Markets/Financial%20Trading%20and%20Markets/Chapter%209%20Arbitrage%20and%20Hedging%20With%20Options.md) such as swaps,  swaptions,  caps,  [floors](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2016/Caps%20and%20Floors.md) etc. require a so-called multi-curve framework with a separate curve necessary for each tenor. We do not develop the multi-curve framework in these notes as our goal is simply to learn the basics of [term structure modeling](../Course%20Notes/Python/QuantLib-Python/Hull%20White%20Term%20Structure%20Simulations%20with%20QuantLib%20Python.md) and [fixed income derivatives](.md) [pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md).

## 1 Binomial-Lattice Models

We begin with [binomial](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%205%20Options%20on%20Prices%20and%20Hedge-Based%20Valuation/A%20Real-Life%20Option%20Pricing%20Exercise.md)-[lattice models](../Financial%20Instruments/Binomial%20Option%20Pricing%20Model.md) of the [short rate](../Fixed%20Income%20Asset%20Pricing/Fixed%20Income%20Lecture%20Notes/An%20Overview%20of%20the%20Vasicek%20Short%20Rate%20Model.md). These models may be viewed as models in their own right or as approximations to more sophisticated continuous-time one-factor short-rate models. These models will also be used to introduce various interest rate [derivatives](../Financial%20Markets/Financial%20Trading%20and%20Markets/Chapter%209%20Arbitrage%20and%20Hedging%20With%20Options.md) that are commonly traded in the [financial markets](../Financial%20Markets%20and%20Institutions/Financial%20Markets%20and%20Institutions%20Lecture%20Notes.md).

## 1.1 Constructing An Arbitrage-Free Lattice

Consider the [binomial lattice](.md) below where we specify the [short rate](../Fixed%20Income%20Asset%20Pricing/Fixed%20Income%20Lecture%20Notes/An%20Overview%20of%20the%20Vasicek%20Short%20Rate%20Model.md),  ri,  j,  that will apply for the single period beginning at node N(*i,  j*). This means for example that if $1 is deposited in the cash account at t = i,   state j,
(i.e. node N(*i,   j*),   then this deposit will be worth $(1 + ri,  j) at time t + 1 regardless of the successor node to N(*i,  j*).
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

![0_image_0.png](0_image_0.png)

![0_image_1.png](0_image_1.png)

<<<<<<< HEAD
We use martingale pricing on this lattice to compute security prices. For example, if $S_i(j)$ is the value of a non-dividend/coupon[^1] paying security at time $i$ and state $j$, then we *insist* that

$$S_{i}(j) = \frac{1}{1+r_{i,j}}\left[q_{u}S_{i+1}(j+1)+q_{d}S_{i+1}(j)\right] \tag{1}$$

where $q_u$ and $q_d$ are the probabilities of up and down-moves, respectively. If the security pays a coupon, it should be included in the right-hand side of (1). Such a model is arbitrage-free *by construction*.

[^1]: Since this is a term-structure course we will henceforth refer to any intermediate cash-flow as a coupon, regardless of whether or not is in fact a coupon.

## 1.2 Computing The Term-Structure From The Lattice

It is easy to compute the price of a zero-coupon bond once the EMM, $Q$, (with the cash account as numeraire) and the short-rate lattice are specified. In the short rate-lattice below (where the short rate increases by a factor of $u = 1.25$ or decreases by a factor of $d = 0.8$ in each period), we assume that the $Q$-probability of each branch is 0.5 and node-independent. We can then use martingale-pricing to compute the prices of zero-coupon bonds.
=======
t = 0 t = 1 t = 2 t = 3 t = 4
We use [martingale pricing](7.%20Black%20Scholes%20Model.md) on this lattice to compute security prices. For example,  if Si(j) is the value of a non-dividend / coupon1 paying security at time i and state j,  then we *insist* that
$$S_{i}(j)\;=\;\frac{1}{1+r_{i,  j}}\left[q_{u}\;S_{i+1}(j+1)+q_{d}\;S_{i+1}(j)\right]\tag{1}$$$$(1)$$

where qu and qd are the probabilities of upand down-moves,  respectively. If the security pays a coupon should be included in the right-hand side of (1). Such a model is [arbitrage](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md)-free *by construction*.

## 1.2 [](1.%20DeterministicCashFlows.md#3%20The%20Term%20Structure%20Of%20Interest%20Rates|Computing%20The%20Term-Structure%20From%20The%20Lattice)

It is easy to compute the price of a zero-coupon bond once the EMM,  Q,  (with the cash account as numeraire)
and the short-rate lattice are specified. In the [short rate](../Fixed%20Income%20Asset%20Pricing/Fixed%20Income%20Lecture%20Notes/An%20Overview%20of%20the%20Vasicek%20Short%20Rate%20Model.md)-lattice below (where the [short rate](../Fixed%20Income%20Asset%20Pricing/Fixed%20Income%20Lecture%20Notes/An%20Overview%20of%20the%20Vasicek%20Short%20Rate%20Model.md) increases by a factor of u = 1.25 or decreases by a factor of d =0.\1 in each period),  we assume that the Q-probability of each branch is0.\1 and node-independent. We can then use martingale-[pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) to compute the prices of zero-coupon bonds.

| [Short Rate](../Fixed%20Income%20Asset%20Pricing/Fixed%20Income%20Lecture%20Notes/An%20Overview%20of%20the%20Vasicek%20Short%20Rate%20Model.md) Lattice   | 0.183   |       |       |       |       |
|----------------------|---------|-------|-------|-------|-------|
|                      | 0.146   | 0.132 |       |       |       |
|                      | 0.117   | 0.105 | 0.095 |       |       |
| 0.094                | 0.084   | 0.076 | 0.068 |       |       |
| 0.075                | 0.068   | 0.061 | 0.055 | 0.049 |       |
| 0.060                | 0.054   | 0.049 | 0.044 | 0.039 | 0.035 |
| t=0                  | t=1     | t=2   | t=3   | t=4   | t=5   |

Example 1 ([Pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) a Zero-Coupon Bond)
We compute the price of a 4-period zero-coupon bond with face value 100 that expires at t = 4. Assuming the short-rate lattice is as given above,  we see,  for example,  that the bond price at node (2,  2) is given by
$$83.08\ =\ {\frac{1}{1+0.\1}}\left[{\frac{1}{2}}\ 89.51+{\frac{1}{2}}\ 92.22\right].$$
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

| Short Rate Lattice | 0.183   |       |       |       |       |
|--------------------|---------|-------|-------|-------|-------|
|                    | 0.146   | 0.132 |       |       |       |
|                    | 0.117   | 0.105 | 0.095 |       |       |
| 0.094              | 0.084   | 0.076 | 0.068 |       |       |
| 0.075              | 0.068   | 0.061 | 0.055 | 0.049 |       |
| 0.060              | 0.054   | 0.049 | 0.044 | 0.039 | 0.035 |
| t=0                | t=1     | t=2   | t=3   | t=4   | t=5   |

**Example 1** (Pricing a Zero-Coupon Bond)
We compute the price of a 4-period zero-coupon bond with face value $100 that expires at $t = 4$. Assuming the short-rate lattice is as given above, we see, for example, that the bond price at node (2, 2) is given by

<<<<<<< HEAD
$$83.08 = \frac{1}{1+0.105}\left[\frac{1}{2} 89.51+\frac{1}{2} 92.22\right].$$
=======
Note that given the price of the 4-period zero-coupon bond,  we can now find the 4-period [spot rate](../International%20Finance/The%20Foreign%20Exchange%20Market%20Annotations.md),  s4. It satisfies 77.22 = 1/(1 + s4)
4if we quote spot rates on a per-period basis. In this manner we can construct the entire term-structure by evaluating zero-coupon bond prices for all maturities.
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

| 4-Year Zero | 100.00   |        |        |        |
|-------------|----------|--------|--------|--------|
|             | 89.51    | 100.00 |        |        |
| 83.08       | 92.22    | 100.00 |        |        |
| 79.27       | 87.35    | 94.27  | 100.00 |        |
| 77.22       | 84.43    | 90.64  | 95.81  | 100.00 |
| t=0         | t=1      | t=2    | t=3    | t=4    |

<<<<<<< HEAD
Iterating backwards, we find that the zero-coupon bond is worth $77.22 at $t = 0$.

Note that given the price of the 4-period zero-coupon bond, we can now find the 4-period spot rate, $s_4$. It satisfies $77.22 = 1/(1 + s_4)^4$ if we quote spot rates on a per-period basis. In this manner we can construct the entire term-structure by evaluating zero-coupon bond prices for all maturities.

## 1.3 Pricing Interest Rate Derivatives

We now introduce and price several interest-rate derivatives using the straightforward martingale pricing methodology. (After we derive the *forward equations* in a later section, we will see an even easier and more efficient[^2] method for pricing derivatives.) The following examples will be based on the short-rate lattice and the corresponding zero-coupon bond of Example 1.

[^2]: Of course the forward equations are themselves derived using martingale pricing so they really add nothing new to the theory.

**Example 2** (Pricing a European Call Option on a Zero-Coupon Bond)
We want to compute the price of a European call option on the zero-coupon bond of Example 1 that expires at $t = 2$ and has strike $84. The option price of $2.97 is computed by backwards induction on the lattice below.
=======
## 1.3 [](7.%20Black%20Scholes%20Model.md#1.1%20Martingale%20Pricing|Pricing%20Interest%20Rate%20Derivatives)

We now introduce and price several interest-rate [derivatives](../Financial%20Markets/Financial%20Trading%20and%20Markets/Chapter%209%20Arbitrage%20and%20Hedging%20With%20Options.md) using the straightforward [martingale pricing](7.%20Black%20Scholes%20Model.md) methodology. (After we derive the *forward equations* in a later section,  we will see an even easier and more efficient2 method for [pricing derivatives](../Pricing%20Forwards,%20Futures,%20Bonds,%20Swaps,%20Swaptions,%20Caps%20and%20Floors%20under%20No-Arbitrage%20and%20Risk-Neutral%20Pricing.md).) The following examples will be based on the short-rate lattice and the corresponding zero-coupon bond of Example 1.

Example 2 ([Pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) a European Call Option on a Zero-Coupon Bond)
We want to compute the price of a European call option on the zero-coupon bond of Example 1 that expires at t = 2 and has strike $84. The option price of $2.97 is computed by backwards induction on the lattice below.
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

|      | 0.00   | European Call Option   |
|------|--------|------------------------|
| 1.56 | 3.35   | Strike = $84           |
| 2.97 | 4.74   | 6.64                   |
| t=0  | t=1    | t=2                    |

|       | 0.00   |                     |              |
|-------|--------|---------------------|--------------|
| 4.92  | 0.00   | American Put Option |              |
| 8.73  | 0.65   | 0.00                | Strike = $88 |
| 10.78 | 3.57   | 0.00                | 0.00         |
| t=0   | t=1    | t=2                 | t=3          |

<<<<<<< HEAD
**Example 3** (Pricing an American Put Option on a Zero-Coupon Bond) 
We want to compute the price of an American put option on the same zero-coupon bond. The expiration date is $t = 3$ and the strike is $88. Again the price is computed by backwards induction on the lattice below, where the maximum of the *continuation value* and exercise value is equal to the option value at each node.

## Futures Contracts On Bonds

Let $F_k$ be the date $k$ price of a futures contract written on a particular underlying security in a complete[^3] market model. We assume that the contract expires after $n$ periods and we let $S_k$ denote the time $k$ price of the security. Then we know that $F_n = S_n$, i.e., at expiration the futures price and the security price must coincide.

[^3]: A complete market is assumed so that we can uniquely price any security and more generally, the futures price process. We could, however, have assumed markets were incomplete and still compute the futures price process as long as certain securities were replicable.

We can compute the futures price at $t = n - 1$ by recalling that anytime we enter a futures contract, the initial value of the contract is 0. Therefore the futures price, $F_{n-1}$, at date $t = n - 1$ must satisfy

$$\begin{array}{rcl}
0 &=& \mathrm{E}_{n-1}^{Q}\left[\frac{F_{n}-F_{n-1}}{B_{n}}\right]
\end{array}$$

where we will assume that the numeraire security is the cash account with value $B_n$ at date $n$. Since $B_n$ and $F_{n-1}$ are both known at date $t = n - 1$, we therefore have $F_{n-1} = \mathrm{E}^Q_{n-1}[F_n]$. By the same argument, we also have more generally that $F_k = \mathrm{E}^Q_k[F_{k+1}]$ for $0 \leq k < n$. We can then use the law of iterated expectations to see that $F_0 = \mathrm{E}^Q_0[F_n]$, implying in particular that the futures price process is a martingale. Since $F_n = S_n$ we have

$$F_0 = \mathrm{E}^Q_0[S_n]. \tag{2}$$

**Remark 1** Note that the above argument holds regardless of whether or not the underlying security pays dividends or coupons as long as the settlement price, $S_n$, is ex-dividend. In particular, we can use (2) to price futures on zero-coupon and coupon bearing bonds.

**Remark 2** It is important to note that (2) applies only when the EMM, $Q$, is the EMM corresponding to when the cash account is numeraire.

## Forward Contracts On Bonds

Now let us consider the date 0 price, $G_0$, of a forward contract for delivery of the same security at the same date, $t = n$. We recall that $G_0$ is chosen in such a way that the contract is initially worth zero. In particular, martingale pricing implies
=======
Example 3 ([Pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) an American Put Option on a Zero-Coupon Bond) We want to compute the price of an American put option on the same zero-coupon bond. The [expiration date](../Financial%20Instruments/Financial%20Derivatives%20and%20Quantitative%20Methods/Risk%20Neutral%20Pricing%20of%20Options.md) is t = 3 and the strike is $88. Again the price is computed by backwards induction on the lattice below,  where the maximum of the *continuation value* and exercise value is equal to the option value at each node.

## Futures Contracts On Bonds

Let Fk be the date k price of a [futures](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%203%20-%20Futures%20Markets/Futures%20Not%20Subject%20to%20Cash-And-Carry.md) contract written on a particular underlying security in a complete3 market model. We assume that the contract expires after n periods and we let Sk denote the time k price of the security. Then we know that Fn = Sn,  i.e.,  at expiration the [futures price](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2011/Futures%20Price%20and%20the%20Quality%20Option%20Before%20E.md) and the security price must coincide.

We can compute the [futures price](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2011/Futures%20Price%20and%20the%20Quality%20Option%20Before%20E.md) at t = n − 1 by recalling that anytime we enter a [futures](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%203%20-%20Futures%20Markets/Futures%20Not%20Subject%20to%20Cash-And-Carry.md) contract,  the initial value of the contract is 0. Therefore the [futures price](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2011/Futures%20Price%20and%20the%20Quality%20Option%20Before%20E.md),  Fn−1,  at date t = n − 1 must satisfy
$$\begin{array}{r c l}{{0}}&{{=}}&{{\mathrm{E}_{n-1}^{Q}\left[\frac{F_{n}-F_{n-1}}{B_{n}}\right]}}\end{array}$$

2Of course the forward equations are themselves derived using [martingale pricing](7.%20Black%20Scholes%20Model.md) so they really add nothing new to the theory.

3A complete market is assumed so that we can uniquely price any security and more generally,  the [futures price](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2011/Futures%20Price%20and%20the%20Quality%20Option%20Before%20E.md) process. We could,  however,  have assumed markets were incomplete and still compute the [futures price](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2011/Futures%20Price%20and%20the%20Quality%20Option%20Before%20E.md) process as long as certain securities were replicable.
where we will assume that the numeraire security is the cash account with value Bn at date n. Since Bn and Fn−1 are both known at date t = n − 1,  we therefore have Fn−1 = EQ
n−1
[Fn]. By the same argument,  we also have more generally that Fk = EQ
k
[Fk+1] for 0 ≤ *k < n*. We can then use the [law of iterated expectations](../Financial%20Markets/Financial%20Asset%20Pricing%20Theory%20Overview/Chapter%2011%20-%20Risk-adjusted%20probabilities/General%20Risk-Adjusted%20Probability%20Measures.md) to see that F0 = EQ
0
[Fn],  implying in particular that the [futures price](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2011/Futures%20Price%20and%20the%20Quality%20Option%20Before%20E.md) process is a martingale. Since Fn = Sn we have
$$\overline{{{\begin{array}{c}{F_{0}\ =\ \mathrm{E}_{0}^{Q}\left[S_{n}\right].}\end{array}}}$$$$\left(2\right)$$

[Sn]. (2)
Remark 1 Note that the above argument holds regardless of whether or not the underlying security pays dividends or coupons as long as the settlement price,  Sn*,  is ex-dividend. In particular,  we can use (2) to price* [futures](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%203%20-%20Futures%20Markets/Futures%20Not%20Subject%20to%20Cash-And-Carry.md) on zero-coupon and coupon bearing bonds. Remark 2 It is important to note that (2) applies only when the EMM,  Q*,  is the EMM corresponding to when* the cash account is numeraire.

## Forward Contracts On Bonds

Now let us consider the date 0 price,  G0,  of a [forward contract](../Clippings/Forward%20Points%20in%20Currency.md) for delivery of the same security at the same date,  t = n. We recall that G0 is chosen in such a way that the contract is initially worth zero. In particular,  [martingale pricing](7.%20Black%20Scholes%20Model.md) implies
$$\begin{array}{r c l}{{0}}&{{=}}&{{\mathrm{E}_{0}^{Q}\left[\frac{S_{n}-G_{0}}{B_{n}}\right].}}\end{array}$$
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

$$\begin{array}{rcl}
0 &=& \mathrm{E}_{0}^{Q}\left[\frac{S_{n}-G_{0}}{B_{n}}\right].
\end{array}$$

<<<<<<< HEAD
Rearranging terms and using the fact that $G_0$ is known at date $t = 0$ we obtain

$$G_0 = \frac{\mathrm{E}_{0}^{Q}\left[S_{n}/B_{n}\right]}{\mathrm{E}_{0}^{Q}\left[1/B_{n}\right]} \tag{3}$$

**Remark 3** If $B_n$ and $S_n$ are $Q$-independent, then $G_0 = F_0$. In particular, if interest rates are deterministic, we have $G_0 = F_0$.

**Remark 4** If the underlying security does not pay dividends or coupons (storage costs may be viewed as negative dividends), then we obtain $G_0 = S_0/\mathrm{E}^Q_0[1/B_n] = S_0/d(0,n)$.

**Example 4** (Pricing a Forward Contract on a Coupon-Bearing Bond)
We now price a forward contract for delivery at $t = 4$ of a 2-year 10% coupon-bearing bond where we assume that delivery takes place just after a coupon has been paid. In the lattice below we use backwards induction to compute the $t = 4$ price (ex-coupon) of the bond. We then use (3) to price the contract, with the numerator given by the value at node (0, 0) of the lattice and the denominator equal to the 4-year discount factor. Note that between $t = 0$ and $t = 4$ in the lattice below, coupons are (correctly) ignored.
=======
Remark 3 If Bn and Sn are Q-independent,  then G0 = F0. In particular,  if [interest rates](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%202/Interest%20Rate%20Quotations.md) are deterministic,  we have G0 = F0.

Remark 4 *If the underlying security does not pay dividends or coupons ([storage costs](../Financial%20Instruments/Lecture%20Notes-%20Financial%20Instruments/Teaching%20Note%201-%20Forward%20Rates%20Agreement/Primary%20vs.%20Secondary%20Commodities.md) may be viewed as* negative dividends),  then we obtain G0 = S0/E
Q
0
[1/Bn] = S0/d(0,  n).

Example 4 ([Pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) a [Forward Contract](../Clippings/Forward%20Points%20in%20Currency.md) on a Coupon-Bearing Bond)
We now price a [forward contract](../Clippings/Forward%20Points%20in%20Currency.md) for delivery at t = 4 of a 2-year 10% coupon-bearing bond where we assume that delivery takes place just after a coupon has been paid. In the lattice below we use backwards induction to compute the t = 4 price (ex-coupon) of the bond. We then use (3) to price the contract,  with the numerator given by the value at node (0,  0) of the lattice and the denominator equal to the 4-year [discount factor](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%201/Discount%20Factors.md). Note that between t = 0 and t = 4 in the lattice below,  coupons are (correctly) ignored.
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

|                                   |         | 110.00   |         |         |        |        |
|-----------------------------------|---------|----------|---------|---------|--------|--------|
|                                   |         | 102.98   | 110.00  |         |        |        |
|                                   | | 91.66 | 107.19   | 110.00  |         |        |        |
| 85.08                             | | 98.44 | 110.46   | 110.00  |         |        |        |
| 81.53                             | 93.27   | |103.83  | 112.96  | 110.00  |        |        |
| 79.99                             | 90.45   | 99.85    | |108.00 | 114.84  | 110.00 |        |
| 79.83                             | 89.24   | 97.67    | 104.99  | |111.16 | 116.24 | 110.00 |
| t=0                               | t=1     | t=2      | t=3     | t=4     | t=5    | t=6    |
<<<<<<< HEAD
| Forward Price = 100*79.83 / 77.22 |         | = 103.38 |         |         |        |        |

**Example 5** (Pricing a Futures Contract on a Coupon-Bearing Bond)
The $t = 0$ price of a futures contract expiring at $t = 4$ on the same coupon-bearing bond is given at node (0, 0) in the lattice below. This lattice is constructed using (2). Note that the forward and futures price are close but not equal.

| Futures Price | 91.66   |        |        |        |
|---------------|---------|--------|--------|--------|
|               | 95.05   | 98.44  |        |        |
|               | 98.09   | 101.14 | 103.83 |        |
| 100.81        | 103.52  | 105.91 | 108.00 |        |
| 103.22        | 105.64  | 107.75 | 109.58 | 111.16 |
| t=0           | t=1     | t=2    | t=3    | t=4    |

## Example 6 (Pricing A Caplet)

A *caplet* is similar to a European call option on the interest rate $r_t$. They are usually settled *in arrears* but they may also be settled in advance. If the maturity is $\tau$ and the strike is $c$ then the payoff of a caplet (settled in arrears) at time $\tau$ is $(r_{\tau-1} - c)^+$. That is, the caplet is a call option on the short rate prevailing at time $\tau - 1$, settled at time $\tau$.
=======
| [Forward Price](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2011/Forward%20Contracts%20and%20Forward%20Prices.md) = 100*79.83 / 77.22 |         | = 103.38 |         |         |        |        |

Example 5 ([Pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) a [Futures](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%203%20-%20Futures%20Markets/Futures%20Not%20Subject%20to%20Cash-And-Carry.md) Contract on a Coupon-Bearing Bond)
The t = 0 price of a [futures](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%203%20-%20Futures%20Markets/Futures%20Not%20Subject%20to%20Cash-And-Carry.md) contract expiring at t = 4 on the same coupon-bearing bond is given at node (0,  0)
in the lattice below. This lattice is constructed using (2). Note that the forward and [futures price](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2011/Futures%20Price%20and%20the%20Quality%20Option%20Before%20E.md) are close but not equal.

| [Futures Price](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2011/Futures%20Price%20and%20the%20Quality%20Option%20Before%20E.md)   | 91.66   |        |        |        |
|-----------------|---------|--------|--------|--------|
|                 | 95.05   | 98.44  |        |        |
|                 | 98.09   | 101.14 | 103.83 |        |
| 100.81          | 103.52  | 105.91 | 108.00 |        |
| 103.22          | 105.64  | 107.75 | 109.58 | 111.16 |
| t=0             | t=1     | t=2    | t=3    | t=4    |

## Example 6 (Pricing A Caplet)

A *caplet* is similar to a European call option on the interest rate rt. They are usually settled *in arrears* but they may also be settled in advance. If the maturity is τ and the strike is c then the payoff of a caplet (settled in arrears) at time τ is (rτ−1 − c)
+. That is,  the caplet is a call option on the [short rate](../Fixed%20Income%20Asset%20Pricing/Fixed%20Income%20Lecture%20Notes/An%20Overview%20of%20the%20Vasicek%20Short%20Rate%20Model.md) prevailing at time τ − 1,  settled at time τ.
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

In the lattice below we price a caplet that expires at $t = 6$ with strike = 2%. Note, however, that it is easier to record the time 6 cash flows at their time 5 predecessor nodes, discounting them appropriately. For example, the value at node $N(4,0)$ is given by

| Caplet Strike = 2% |       | 0.138   |       |       |       |
|--------------------|-------|---------|-------|-------|-------|
|                    |       | 0.103   | 0.099 |       |       |
| 0.080              |       | 0.076   | 0.068 |       |       |
| 0.064              | 0.059 | 0.053   | 0.045 |       |       |
| 0.052              | 0.047 | 0.041   | 0.035 | 0.028 |       |
| 0.042              | 0.038 | 0.032   | 0.026 | 0.021 | 0.015 |
| t=0                | t=1   | t=2     | t=3   | t=4   | t=5   |

<<<<<<< HEAD
$$0.021 = \frac{1}{1.039}\left[\frac{1}{2}\frac{\max(0, 0.049-0.02)}{1.049}+\frac{1}{2}\frac{\max(0, 0.035-0.02)}{1.035}\right]$$

**Remark 5** In practice caplets are usually based on LIBOR (London Inter-Bank Offered Rates).
=======
Remark 5 *In practice caplets are usually based on* [Basis Swap](A%20Guide%20to%20the%20Front%20End%20and%20[[Basis%20Swaps) Markets#[London Interbank Offered Rate](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2012/Short-Term%20Rates%20and%20the%20Transition%20from%20LIBOR.md) (LIBOR)|LIBOR]] (London Inter-Bank Offered Rates).

Caps: A cap is a string of caplets,  one for each time period in a fixed interval of time and with each caplet having the same [strike price](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%205%20Options%20on%20Prices%20and%20Hedge-Based%20Valuation/Call%20and%20Put%20Payoffs%20at%20Expiry.md),  c.
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

**Caps**: A cap is a string of caplets, one for each time period in a fixed interval of time and with each caplet having the same strike price, $c$.

**Floorlets**: A *floorlet* is similar to a caplet, except it has payoff $(c - r_{\tau-1})^+$ and is usually settled in arrears at time $\tau$.

<<<<<<< HEAD
**Floors**: A *floor* is a string of floorlets, one for each time period in a fixed interval of time and with each floorlet having the same strike price, $c$.
=======
[Floors](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2016/Caps%20and%20Floors.md): A *floor* is a string of floorlets,  one for each time period in a fixed interval of time and with each floorlet having the same [strike price](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%205%20Options%20on%20Prices%20and%20Hedge-Based%20Valuation/Call%20and%20Put%20Payoffs%20at%20Expiry.md),  c.
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

## 2 The Forward Equations

**Definition 1** Let $P_e(i,j)$ denote the time 0 price of a security that pays $1 at time $i$, state $j$ and 0 at every other time and state. We say such a security is an elementary security and we refer to the $P_e(i,j)$'s as state prices.

It is easily seen that the elementary security prices satisfy the forward equations:

$$\begin{array}{rcl}
P_{e}(k+1, s) &=& \frac{P_{e}(k, s-1)}{2(1+r_{k, s-1})} + \frac{P_{e}(k, s)}{2(1+r_{k, s})}, \quad 0 < s < k+1\\
\\
P_{e}(k+1, 0) &=& \frac{1}{2}\frac{P_{e}(k, 0)}{(1+r_{k, 0})}\\
\\
P_{e}(k+1, k+1) &=& \frac{1}{2}\frac{P_{e}(k, k)}{(1+r_{k, k})}
\end{array}$$

<<<<<<< HEAD
**Exercise 1** *Derive the forward equations.*

Since we know $P_e(0,0) = 1$ we can use the above equations to evaluate all the state prices by working *forward* from node $N(0,0)$. Working with state prices has a number of advantages:

1. Once you compute the state prices they can be stored and used repeatedly for pricing derivative securities without needing to use backwards iteration each time.
2. In particular, the term structure can be computed using $O(T^2)$ operations by first computing the state prices. In contrast, computing the term structure by first computing all zero-coupon bond prices using backwards iteration takes $O(T^3)$ operations. While this makes little difference given today's computing power, writing code to price derivatives in lattice models is often made easier when we price with the state prices.
3. They can be useful for calibrating lattice models to observed market data.

It should be noted that when pricing securities with an early exercise feature, state prices are of little help and it is still necessary to use backwards iteration.

## 2.1 Hedging In The Binomial Lattice

It is very easy to hedge in a binomial-lattice model. For example, if we wish to hedge a payoff that occurs at $t = s$, then we can use any two securities (that do not expire before $t = s$) to do this. In particular, we could use the cash account and a zero-coupon bond with maturity $t > s$ as our hedging instruments. At each node and time, we simply choose our holdings in the cash account and zero-coupon bond so that their combined value one period later exactly matches the value of the payoff to be hedged. This of course is exactly analogous to hedging in the classic binomial model for stocks.

That we can hedge with just two securities betrays a weakness of the binomial lattice model and 1-factor short-rate models more generally. In practice, the value of an interest-rate derivative will be sensitive to changes in the entire term-structure and it is unlikely that such changes can be perfectly hedged using just two securities. It is possible in some circumstances, however, that good *approximate* hedges can be found using just two securities. In the example below, we hedge using elementary securities.
=======
1. Once you compute the state prices they can be stored and used repeatedly for [pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) [derivative securities](Financial%20Mathematics%20Course.md) without needing to use backwards iteration each time.
1. In particular,  the [term structure](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%209/The%20Vasicek%20Model.md) can be computed using O(T
1. operations by first computing the state prices. In contrast,  computing the [term structure](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%209/The%20Vasicek%20Model.md) by first computing all zero-coupon bond prices using backwards iteration takes O(T
1. operations. While this makes little difference given today's computing power,  writing code to price [derivatives](../Financial%20Markets/Financial%20Trading%20and%20Markets/Chapter%209%20Arbitrage%20and%20Hedging%20With%20Options.md) in [lattice models](../Financial%20Instruments/Binomial%20Option%20Pricing%20Model.md) is often made easier when we price with the state prices.
1. They can be useful for calibrating [lattice models](../Financial%20Instruments/Binomial%20Option%20Pricing%20Model.md) to observed market data.

It should be noted that when [pricing securities](../Course%20Notes/Python/QuantLib-Python/An%20Introduction%20to%20Interest%20Rate%20Term%20Structure%20in%20QuantLib%20Python.md) with an [early exercise](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%2016/Bond%20Futures%20Options.md) feature,  state prices are of little help and it is still necessary to use backwards iteration.

## 2.1 [](7.%20Black%20Scholes%20Model.md#4%20Delta%20Hedging|Hedging%20In%20The%20Binomial%20Lattice)

It is very easy to hedge in a [binomial](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%205%20Options%20on%20Prices%20and%20Hedge-Based%20Valuation/A%20Real-Life%20Option%20Pricing%20Exercise.md)-lattice model. For example,  if we wish to hedge a payoff that occurs at t = s,  then we can use any two securities (that do not expire before t = s) to do this. In particular,  we could use the cash account and a zero-coupon bond with maturity *t > s* as our [hedging](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%205/Key%20Rates%20O1s%20Durations%20and%20Hedging.md) instruments. At each node and time,  we simply choose our holdings in the cash account and zero-coupon bond so that their combined value one period later exactly matches the value of the payoff to be hedged. This of course is exactly analogous to [hedging](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%205/Key%20Rates%20O1s%20Durations%20and%20Hedging.md) in the classic [binomial model](../Financial%20Instruments/Lecture%20Notes-%20Financial%20Instruments/Teaching%20Note%204-Multiperiod%20Binomial%20Trees/Binomial%20Option%20Pricing.md) for stocks.

That we can hedge with just two securities betrays a weakness of the [binomial lattice](.md) model and 1-factor short-rate models more generally. In practice,  the value of an interest-rate derivative will be sensitive to changes in the entire term-structure and it is unlikely that such changes can be perfectly hedged using just two securities. It is possible in some circumstances,  however,  that good *approximate* hedges can be found using just two securities. In the example below,  we hedge using elementary securities.
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

![7_image_0.png](7_image_0.png)

![7_image_1.png](7_image_1.png)

<<<<<<< HEAD
**Example 7** (a) Consider the short rate lattice of Figure 4.1 where interest rates are expressed as percentages.

You may assume the risk-neutral probabilities are given by $q = 1 - q = 1/2$ at each node.
=======
Example 7 (a) Consider the [short rate](../Fixed%20Income%20Asset%20Pricing/Fixed%20Income%20Lecture%20Notes/An%20Overview%20of%20the%20Vasicek%20Short%20Rate%20Model.md) lattice of Figure 4.1 where [interest rates](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%202/Interest%20Rate%20Quotations.md) are expressed as percentages.

You may assume the [risk-neutral probabilities](../Financial%20Instruments/Financial%20Instruments.md) are given by q = 1 − q = 1/2 at each node.
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

Use the forward equation to compute the elementary prices at times $t = 0$, $t = 1$ and $t = 2$.

<<<<<<< HEAD
(b) Consider the different short rate lattice of Figure 4.2 where again you may assume $q = 1 - q = 1/2$. The short rates and elementary prices are given at each node. Using only the elementary prices, find the price of a zero-coupon bond with face value $100 that matures at $t = 3$.

(c) Compute the price of a European call option on the zero-coupon bond of part (b) with strike = $93 and expiration date $t = 2$.

(d) Again referring to Figure 4.2, suppose you have an obligation whose value today is $100 and whose value at node (1, 1) (i.e. when $r = 7.2\%$) is $95. Explain how you would immunize this obligation using date 1 elementary securities?

(e) Consider a forward-start swap that begins at $t = 1$ and ends at $t = 3$. The notional principal is $1 million, the fixed rate in the swap is 5%, and payments at $t = i$ ($i=2,3$) are based on the fixed rate minus the floating rate that prevailed at $t = i - 1$. Compute the value of this forward swap.
=======
(b) Consider the different [short rate](../Fixed%20Income%20Asset%20Pricing/Fixed%20Income%20Lecture%20Notes/An%20Overview%20of%20the%20Vasicek%20Short%20Rate%20Model.md) lattice of Figure 4.2 where again you may assume q = 1 − q = 1/2. The short rates and elementary prices are given at each node. Using only the elementary prices,  find the price of a zero-coupon bond with face value $100 that matures at t = 3.

(c) Compute the price of a European call option on the zero-coupon bond of part (b) with strike = $93 and [expiration date](../Financial%20Instruments/Financial%20Derivatives%20and%20Quantitative%20Methods/Risk%20Neutral%20Pricing%20of%20Options.md) t = 2.

(d) Again referring to Figure 4.2,  suppose you have an obligation whose value today is $100 and whose value at node (1,   1) (i.e. when r = 7.2%) is $95. Explain how you would immunize this obligation using date 1 elementary securities? (e) Consider a forward-start swap that begins at t = 1 and ends at t = 3. The [notional principal](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%204%20-%20Swap%20Markets/Fundamentals%20of%20Swaps.md) is $1 million,  the fixed rate in the swap is 5%,  and payments at t = i (i=2,  3) are based on the fixed rate minus the floating rate that prevailed at t = i − 1. Compute the value of this [forward swap](Derivatives/Part%20IX%20-%20Fixed%20Income%20Derivatives/Chapter%2039%20-%20Swaptions,%20Forward%20Swaps,%20and%20MBS.md).
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

![7_image_2.png](7_image_2.png)

**Figure 4.2 Solution**

(a) $P_e(0,0) = 1$, $P_e(1,0) = 0.486$, $P_e(1,1) = 0.467$, $P_e(2,0) = 0.2238$, $P_e(2,1) = 0.4426$, $P_e(2,2) = 0.2188$.

(b) $(0.0981 + 0.2047 + 0.2801 + 0.2498) \times 100 = 83.27$.

(c) The value of the zero coupon bond at nodes (2, 0), (2, 1) and (2, 2) are 95.3652, 93.9144 and 92.0471 respectively. This means the payoffs of the option are 2.3652, 0.9144 and 0 respectively. Now use the time 2 elementary prices to find that the option price equals $2.3652 \times 0.2238 + 0.9144 \times 0.4426 = 0.9289$.

(d) First find the value, $x$, of the obligation at node (1, 0). It must be that $x$ satisfies

$$100 = \frac{1}{2}\frac{95}{1.06} + \frac{1}{2}\frac{x}{1.06}$$

which implies $x = 117$. So to hedge the obligation, buy 95 node (1, 1) state securities and 117 node (1, 0) state securities. The cost of this is $117 \times 0.486 + 95 \times 0.467 = 100$, of course!

(e) The value of the swap today is (why?)
$(0.05/1.072 \times 0.0981) + (0.05/1.054 \times 0.2047) + (0.05/1.0864 \times 0.2801) +
(0.05/1.0648 \times 0.2498) - (0.06/1.0486 \times 0.0981) = 0.0247$ million.

## 3 Some Specific Models

If we want to use a lattice model in practice then we need to *calibrate* the model to market data. The most basic requirement is that the term-structure (equivalently zero-coupon bond prices) in the market should also match the term-structure of the lattice model. We now show how this can be achieved in the context of two specific models, the Ho-Lee model and the Black-Derman-Toy (BDT) model. More generally, we could also calibrate the lattice to interest-rate volatilities and other security prices.

We will assume[^4] again that the $Q$-probabilities are equal to 0.5 on each branch and are node independent. First we describe the Ho-Lee and Black-Derman-Toy models.

[^4]: Later when we approximate diffusion models with trinomial lattices we will not set the Q-probabilities so arbitrarily.

## 3.1 The Ho-Lee Model

The Ho-Lee model assumes that the interest rate at node $N(i,j)$ is given by $r_{i,j} = a_i + b_i j$.

Note that $a_i$ is a *drift* parameter while $b_i$ is a volatility parameter. In particular, the standard deviation of the short-rate at node $N(i,j)$ is equal to $b_i/2$. The continuous-time version of the Ho-Lee model assumes that the short-rate dynamics satisfy $dr_t = \mu_t dt + \sigma_t dW_t$.

The principal strength of the Ho-Lee model is its tractability.

**Exercise 2** *What are the obvious weaknesses of the Ho-Lee model?*

## 3.2 The Black-Derman-Toy Model

The BDT model assumes that the interest rate at node $N(i,j)$ is given by $r_{i,j} = a_i e^{b_i j}$.

Note that $\log(a_i)$ is a *drift* parameter while $b_i$ is a volatility parameter (for $\log(r)$). The continuous-time version of the BDT model assumes that the short-rate has dynamics of the form

$$d Y_{t} = \left(a_{t}+\frac{1}{\sigma_{t}}\frac{\partial\sigma}{\partial t}Y_{t}\right) dt + \sigma_{t} dW_{t}$$

where $Y_t := \log(r_t)$.

<<<<<<< HEAD
**Exercise 3** *What are some of the strengths and weaknesses of the BDT model?*
=======
## 3.3 [](1.%20DeterministicCashFlows.md#3.1%20The%20Term%20Structure,%20Discount%20Factors%20And%20Present%20Values|Calibration%20To%20The%20Observed%20Term-Structure)
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

## 3.3 Calibration To The Observed Term-Structure

Consider an $n$-period lattice and let $(s_1, ..., s_n)$ be the term-structure observed in the market place assuming that spot rates are compounded per period. Suppose we want to calibrate the BDT model to the observed term-structure. Assuming $b_i = b$, a constant for all $i$, we first note that

$$\begin{array}{rcl}
\frac{1}{(1+s_{i})^{i}} &=& \sum_{j=0}^{i}P_{e}(i, j)
\end{array}$$

<<<<<<< HEAD
$$= \frac{P_{e}(i-1, 0)}{2(1+a_{i-1})} + \sum_{j=1}^{i-1}\left(\frac{P_{e}(i-1, j)}{2(1+a_{i-1}e^{bj})} + \frac{P_{e}(i-1, j-1)}{2(1+a_{i-1}e^{b(j-1)})}\right) + \frac{P_{e}(i-1, i-1)}{2(1+a_{i-1}e^{b(i-1)})}. \tag{4}$$

Note that Equation (4) can now be used to solve iteratively for the $a_i$'s as follows:

- Set $i = 1$ in (4) and note that $P_e(0,0) = 1$ to see that $a_0 = s_1$.
- Now use the forward equations to find $P_e(1,0)$ and $P_e(1,1)$.
- Now set $i = 2$ in (4) and solve for $a_1$.
- Continue to iterate forward until all $a_i$'s have been found.
=======
By construction,  this algorithm will match the observed [term structure](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%209/The%20Vasicek%20Model.md) to the [term structure](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%209/The%20Vasicek%20Model.md) in the lattice.

Example 8 ([Pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) a [Payer Swaption](Derivatives/Part%20IX%20-%20Fixed%20Income%20Derivatives/Chapter%2039%20-%20Swaptions,%20Forward%20Swaps,%20and%20MBS.md) in a BDT Model)
We would like to price a 2 − 8 *[payer swaption](Derivatives/Part%20IX%20-%20Fixed%20Income%20Derivatives/Chapter%2039%20-%20Swaptions,%20Forward%20Swaps,%20and%20MBS.md)* in a BDT model that has been calibrated to match the observed term-structure of [interest rates](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%202/Interest%20Rate%20Quotations.md) in the market place. The 2 − 8 terminology means that the swaption is an option that expires in 2 months to enter an 8-month swap. The swap is settled in arrears so that payments would take place in months 3 through 10 based on the prevailing short-rate of the previous months. The "payer" feature of the option means that if the option is exercised,  the exerciser "pays fixed and receives floating". (The owner of a *receiver swaption* would "receive fixed and pay floating".) For this problem the fixed rate is set at 11.65%. We use a 10-period lattice for our BDT model,  thereby assuming that a single period corresponds to 1 month. The spot-rate curve in the market place has been observed to be
$$s_{1}=7.3,  \ \ s_{2}=7.62,  \ \ s_{3}=8.1,  \ \ s_{4}=8.45,  \ \ s_{5}=9.2$$ $s_{6}=9.64,  \ \ s_{7}=10.12,  \ \ s_{8}=10.45,  \ \ s_{9}=10.75,  \ \ s_{10}=11.22$
with a monthly compounding convention. We will also assume5that bi = b =0.\1 for all i.

The first step is to choose the ai's so that the term-structure in the lattice matches the observed term-structure
(spot-rate curve) given above. For a 10-period problem,  this is easy to do in *Excel* using the *Solver* add-in. For problems with many periods,  however,  it would be preferable to use the algorithm outlined above. The short-rate lattice below gives the values of ai,  i = 0*,  …,  * 9,  so that the model spot-rate curve matches the market spot-rate curve. (Note also that the short-rates at each node N(*i,  j*) do indeed satisfy ri,  j = aie
0.\1j.)
We are now in a position to price the swaption,  assuming a [notional principal](../Financial%20Markets/Financial%20Engineering%20and%20Arbitrage%20in%20the%20Financial%20Markets/PART%20I%20RELATIVE%20VALUE%20BUILDING%20BLOCKS/Chapter%204%20-%20Swap%20Markets/Fundamentals%20of%20Swaps.md) of $1. Let S2 denote the value of the swap at t = 2. We can compute S2 by discounting the cash-flows back from t = 10 to t = 2. It is important to note that it is much easier to record time t cash flows (for t = 3*,  …,  * 10) at their predecessor nodes at time t − 1,  discounting them appropriately. This is why in the swaption lattice above,  there are no payments recorded at t = 10 despite the fact that payments do actually take place then. Exercise 4 *Why is it more convenient to record those cashflows at their predecessor nodes?*
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543

By construction, this algorithm will match the observed term structure to the term structure in the lattice.

**Example 8** (Pricing a Payer Swaption in a BDT Model)
We would like to price a $2 - 8$ *payer swaption* in a BDT model that has been calibrated to match the observed term-structure of interest rates in the market place. The $2 - 8$ terminology means that the swaption is an option that expires in 2 months to enter an 8-month swap. The swap is settled in arrears so that payments would take place in months 3 through 10 based on the prevailing short-rate of the previous months. The "payer" feature of the option means that if the option is exercised, the exerciser "pays fixed and receives floating". (The owner of a *receiver swaption* would "receive fixed and pay floating".) For this problem the fixed rate is set at 11.65%. We use a 10-period lattice for our BDT model, thereby assuming that a single period corresponds to 1 month. The spot-rate curve in the market place has been observed to be

$$s_1 = 7.3, \; s_2 = 7.62, \; s_3 = 8.1, \; s_4 = 8.45, \; s_5 = 9.2$$
$$s_6 = 9.64, \; s_7 = 10.12, \; s_8 = 10.45, \; s_9 = 10.75, \; s_{10} = 11.22$$

with a monthly compounding convention. We will also assume[^5] that $b_i = b = 0.05$ for all $i$.

[^5]: We could, however, also calibrate various term-structure volatilities and/or other security prices by not fixing the $b_i$'s in advance.

The first step is to choose the $a_i$'s so that the term-structure in the lattice matches the observed term-structure (spot-rate curve) given above. For a 10-period problem, this is easy to do in *Excel* using the *Solver* add-in. For problems with many periods, however, it would be preferable to use the algorithm outlined above. The short-rate lattice below gives the values of $a_i$, $i = 0, ..., 9$, so that the model spot-rate curve matches the market spot-rate curve. (Note also that the short-rates at each node $N(i,j)$ do indeed satisfy $r_{i,j} = a_i e^{0.05j}$.)

We are now in a position to price the swaption, assuming a notional principal of $1. Let $S_2$ denote the value of the swap at $t = 2$. We can compute $S_2$ by discounting the cash-flows back from $t = 10$ to $t = 2$. It is important to note that it is much easier to record time $t$ cash flows (for $t = 3, ..., 10$) at their predecessor nodes at time $t - 1$, discounting them appropriately. This is why in the swaption lattice above, there are no payments recorded at $t = 10$ despite the fact that payments do actually take place then. 

**Exercise 4** *Why is it more convenient to record those cashflows at their predecessor nodes?*

The option is then exercised if and only if $S_2 > 0$. In particular, the value of the swaption at maturity ($t = 2$) is $\max(0, S_2)$. This is then discounted backwards to $t = 0$ to find[^6] a swaption value today of 0.0013.

[^6]: An exercise in Assignment 1 discusses whether or not the BDT model together with our method of calibration, is a good approach to pricing swaptions.

|                              | 15.90   |         |         |        |        |        |        |        |        |              |
|------------------------------|---------|---------|---------|--------|--------|--------|--------|--------|--------|--------------|
|                              | 13.45   | 15.82   |         |        |        |        |        |        |        |              |
| Short-Rate Lattice           | 13.01   | 13.38   | 15.74   |        |        |        |        |        |        |              |
|                              | 13.24   | 12.94   | 13.32   | 15.66  |        |        |        |        |        |              |
| 12.02                        | 13.18   | 12.88   | 13.25   | 15.58  |        |        |        |        |        |              |
| 12.38                        | 11.96   | 13.11   | 12.81   | 13.18  | 15.50  |        |        |        |        |              |
| 9.58                         | 12.31   | 11.90   | 13.05   | 12.75  | 13.12  | 15.43  |        |        |        |              |
| 9.11                         | 9.53    | 12.25   | 11.84   | 12.98  | 12.69  | 13.05  | 15.35  |        |        |              |
| 7.96                         | 9.07    | 9.48    | 12.19   | 11.78  | 12.92  | 12.62  | 12.99  | 15.27  |        |              |
| 7.30                         | 7.92    | 9.02    | 9.44    | 12.13  | 11.72  | 12.85  | 12.56  | 12.92  | 15.20  |              |
| Year                         | 0       | 1       | 2       | 3      | 4      | 5      | 6      | 7      | 8      | 9            |
| Spot                         | 7.3     | 7.62    | 8.1     | 8.45   | 9.2    | 9.64   | 10.12  | 10.45  | 10.75  | 11.22        |
| a                            | 7.30    | 7.92    | 9.02    | 9.44   | 12.13  | 11.72  | 12.85  | 12.56  | 12.92  | 15.20 0.0366 |
<<<<<<< HEAD
| Pricing a 2-8 Payer Swaption | 0.0479  | 0.0360  |         |        |        |        |        |        |        |              |
=======
| [Pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) a 2-8 [Payer Swaption](Derivatives/Part%20IX%20-%20Fixed%20Income%20Derivatives/Chapter%2039%20-%20Swaptions,%20Forward%20Swaps,%20and%20MBS.md) | 0.0479  | 0.0360  |         |        |        |        |        |        |        |              |
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543
|                              | 0.0539  | 0.0467  | 0.0353  |        |        |        |        |        |        |              |
|                              | 0.0610  | 0.0523  | 0.0456  | 0.0347 |        |        |        |        |        |              |
| 0.0568                       | 0.0590  | 0.0508  | 0.0444  | 0.0340 |        |        |        |        |        |              |
| 0.0560                       | 0.0546  | 0.0571  | 0.0492  | 0.0433 | 0.0334 |        |        |        |        |              |
| 0.0311                       | 0.0535  | 0.0524  | 0.0552  | 0.0477 | 0.0422 | 0.0327 |        |        |        |              |
| 0.0040                       | 0.0284  | 0.0511  | 0.0502  | 0.0533 | 0.0461 | 0.0411 | 0.0321 |        |        |              |
| 0.0024                       | 0.0011  | 0.0257  | 0.0486  | 0.0480 | 0.0514 | 0.0446 | 0.0399 | 0.0314 |        |              |
| 0.0013                       | 0.0005  | 0.0000  | 0.0230  | 0.0461 | 0.0458 | 0.0495 | 0.0431 | 0.0388 | 0.0308 |              |
| Year                         | 0       | 1       | 2       | 3      | 4      | 5      | 6      | 7      | 8      | 9            |

<<<<<<< HEAD
A related derivative instrument that is commonly traded is a *Bermudan swaption* (payer or receiver). This is the same as a swaption except now the option can be exercised at any of a predetermined set of times, $T = (t_1, ..., t_m)$.
=======
A related derivative instrument that is commonly traded is a *Bermudan swaption* (payer or receiver). This is the same as a swaption except now the option can be exercised at any of a predetermined set of times,  T = (t1*,  …,  t*m).

6An exercise in Assignment 1 discusses whether or not the BDT model together with our method of [calibration](../Credit%20Markets/Credit%20Markets%20Session%204.md),  is a good approach to [pricing](../Financial%20Markets/Fixed%20Income%20Securities%20Tools%20for%20Today's%20Markets/Chapter%207/Arbitrage%20Pricing%20of%20Derivatives.md) swaptions.
>>>>>>> 2e346c030bacda517086e02b86e48ba98c22a543
